<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Calculator</title>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2023839620373581"
     crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">
    <script src="lang.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>

    <nav>
        <ul>
            <li><a href="index.html" data-lang="nav_home">Home</a></li>
            <li><a href="kamatos.html" data-lang="nav_invest">Investment</a></li>
            <li><a href="hitel.html" style="color:#3b82f6;" data-lang="nav_loan">Loan</a></li>
            <li><a href="black_scholes.html" data-lang="nav_bs">Black-Scholes</a></li>
            <li>
                <select id="lang-selector" class="lang-select">
                    <option value="hu">ğŸ‡­ğŸ‡º HU</option>
                    <option value="en">ğŸ‡¬ğŸ‡§ EN</option>
                    <option value="de">ğŸ‡©ğŸ‡ª DE</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ ES</option>
                </select>
            </li>
        </ul>
    </nav>

    <div class="container">
        <h1 data-lang="loan_title">Loan Repayment Calculator</h1>
        <p style="text-align:center; color:#94a3b8;" data-lang="loan_sub">Calculate your monthly payments.</p>
        
        <label data-lang="lbl_loan_amount">Loan Amount:</label>
        <input type="number" id="loan-amount" placeholder="10000000" min="0">

        <label data-lang="lbl_interest_rate">Interest Rate (%):</label>
        <input type="number" id="interest-rate" placeholder="8.5" min="0">

        <label data-lang="lbl_years">Term (Years):</label>
        <input type="number" id="loan-years" placeholder="20" min="1">

        <button class="calc-btn" onclick="calculateLoan()" data-lang="btn_calc">Calculate</button>

        <div class="result" id="loan-result" style="display:none;"></div>
    </div>

    <div id="content-en" class="container seo-content lang-content">
        <h2>About Annuity Loans</h2>
        <p>An annuity loan means you pay the same amount every month. In the beginning, you pay mostly interest; later, you pay mostly principal.</p>
    </div>
    <div id="content-hu" class="container seo-content lang-content">
        <h2>Az AnnuitÃ¡sos HitelrÅ‘l</h2>
        <p>Az annuitÃ¡sos hitel azt jelenti, hogy minden hÃ³napban ugyanannyit fizetsz. Az elejÃ©n fÅ‘leg kamatot tÃ¶rlesztesz, a vÃ©gÃ©n pedig tÅ‘kÃ©t.</p>
    </div>
    <div id="content-de" class="container seo-content lang-content">
        <h2>Ãœber AnnuitÃ¤tendarlehen</h2>
        <p>Ein AnnuitÃ¤tendarlehen bedeutet, dass Sie jeden Monat den gleichen Betrag zahlen. Anfangs zahlen Sie hauptsÃ¤chlich Zinsen, spÃ¤ter Tilgung.</p>
    </div>
    <div id="content-es" class="container seo-content lang-content">
        <h2>Sobre PrÃ©stamos de Anualidad</h2>
        <p>Un prÃ©stamo de anualidad significa que pagas la misma cantidad cada mes. Al principio pagas principalmente intereses; luego pagas capital.</p>
    </div>

    <footer>
        <p>&copy; 2025 <span data-lang="footer_rights">All Rights Reserved.</span> | <a href="privacy.html" data-lang="nav_privacy">Privacy</a></p>
    </footer>

    <script>
        function calculateLoan() {
            let amount = parseFloat(document.getElementById('loan-amount').value);
            let rate = parseFloat(document.getElementById('interest-rate').value); 
            let years = parseFloat(document.getElementById('loan-years').value);

            if (isNaN(amount) || amount < 0) amount = 0;
            if (isNaN(rate) || rate < 0) rate = 0;
            if (isNaN(years) || years <= 0) return;

            let n = years * 12;
            let monthlyPayment = 0;
            let totalPayment = 0;
            let totalInterest = 0;

            if (rate <= 0) {
                monthlyPayment = amount / n;
                totalPayment = amount;
                totalInterest = 0;
            } else {
                let r = (rate / 100) / 12;
                monthlyPayment = amount * ( (r * Math.pow(1+r, n)) / (Math.pow(1+r, n) - 1) );
                totalPayment = monthlyPayment * n;
                totalInterest = totalPayment - amount;
            }

            // Format based on language
            const lang = localStorage.getItem('selectedLang') || 'en';
            const t = translations[lang] || translations['en'];
            
            let formatter = new Intl.NumberFormat(lang === 'hu' ? 'hu-HU' : 'en-US', { 
                style: 'currency', 
                currency: lang === 'hu' ? 'HUF' : 'USD', 
                maximumFractionDigits: 0 
            });

            document.getElementById('loan-result').style.display = 'block';
            document.getElementById('loan-result').innerHTML = 
                `<strong>${t.res_monthly_payment}</strong> <span style="font-size:1.5em; color:#fff">${formatter.format(monthlyPayment)}</span><br>` +
                `<div style="font-size:0.9em; margin-top:10px; color:#cbd5e1;">` +
                `${t.res_total_payment} ${formatter.format(totalPayment)}<br>` +
                `${t.res_total_interest} ${formatter.format(totalInterest)}` +
                `</div>`;
        }
    </script>
</body>
</html>