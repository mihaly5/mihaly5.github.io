<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black-Scholes Calculator</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2023839620373581"
     crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">
    <script src="lang.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        .greeks-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; text-align: left; }
        .greek-item { background-color: #1e293b; padding: 10px; border-radius: 5px; border: 1px solid #334155; }
        .greek-label { font-size: 0.8em; color: #94a3b8; display: block; }
        .greek-value { font-size: 1.1em; color: #fff; font-weight: bold; }
        .unit-label { font-size: 0.7em; color: #64748b; font-weight: normal; margin-left: 2px; }
        .warning-box { background-color: rgba(245, 158, 11, 0.15); border: 1px solid #f59e0b; color: #f59e0b; padding: 10px; border-radius: 5px; margin-bottom: 20px; font-size: 0.9em; display: flex; align-items: center; gap: 10px; }
    </style>
</head>
<body>

    <nav>
        <ul>
            <li><a href="index.html" data-lang="nav_home">Home</a></li>
            <li><a href="kamatos.html" data-lang="nav_invest">Investment</a></li>
            <li><a href="hitel.html" data-lang="nav_loan">Loan</a></li>
            <li><a href="black_scholes.html" style="color:#3b82f6;" data-lang="nav_bs">Black-Scholes</a></li>
            <li>
                <select id="lang-selector" class="lang-select">
                    <option value="hu">üá≠üá∫ HU</option>
                    <option value="en">üá¨üáß EN</option>
                    <option value="de">üá©üá™ DE</option>
                    <option value="es">üá™üá∏ ES</option>
                </select>
            </li>
        </ul>
    </nav>

    <div class="container">
        <h1 data-lang="bs_title">Black-Scholes Model</h1>
        <p style="font-size:0.9em; color:#94a3b8;" data-lang="bs_sub">European Option Pricing</p>
        
        <label data-lang="lbl_stock">Stock Price ($):</label>
        <input type="number" id="S" value="100" min="0.01" step="0.01">

        <label data-lang="lbl_strike">Strike Price ($):</label>
        <input type="number" id="K" value="100" min="0.01" step="0.01">

        <label data-lang="lbl_time">Time to Maturity (Years):</label>
        <input type="number" id="T" value="1" min="0.01" step="0.01">

        <label data-lang="lbl_vol">Volatility (œÉ %):</label>
        <input type="number" id="v" value="20" min="0.01" step="0.1">

        <label data-lang="lbl_r">Risk-free Rate (%):</label>
        <div style="font-size: 0.85em; color: #94a3b8; margin-top: -8px; margin-bottom: 8px;">(Continuously compounded)</div>
        <input type="number" id="r" value="5" step="0.1">

        <button class="calc-btn" onclick="calculateBS()" data-lang="btn_calc">Calculate</button>

        <div class="result" id="bs-result" style="display:none;"></div>
    </div>

    <div id="content-hu" class="container seo-content lang-content">
        <h2>A Black-Scholes Modell</h2>
        <p>A Black-Scholes modell (1973) a modern p√©nz√ºgyek egyik legfontosabb eszk√∂ze.</p>
        <h3>G√∂r√∂g√∂k (Greeks)</h3>
        <ul>
            <li><strong>Delta (Œî):</strong> Az opci√≥ √°r√°nak √©rz√©kenys√©ge.</li>
            <li><strong>Gamma (Œì):</strong> A Delta v√°ltoz√°sa.</li>
            <li><strong>Theta (Œò):</strong> Id≈ë√©rt√©k cs√∂kken√©se.</li>
            <li><strong>Vega (ŒΩ):</strong> Volatilit√°s √©rz√©kenys√©g.</li>
        </ul>
    </div>
    <div id="content-en" class="container seo-content lang-content">
        <h2>Understanding Black-Scholes</h2>
        <p>The Black-Scholes model (1973) is a mathematical model for pricing European-style options.</p>
        <h3>The Greeks</h3>
        <ul>
            <li><strong>Delta (Œî):</strong> Sensitivity to stock price.</li>
            <li><strong>Gamma (Œì):</strong> Rate of change of Delta.</li>
            <li><strong>Theta (Œò):</strong> Time decay.</li>
            <li><strong>Vega (ŒΩ):</strong> Sensitivity to volatility.</li>
        </ul>
    </div>
    <div id="content-de" class="container seo-content lang-content">
        <h2>Das Black-Scholes-Modell</h2>
        <p>Das Black-Scholes-Modell (1973) ist ein Standardwerkzeug im modernen Finanzwesen.</p>
        <h3>Die Griechen (Greeks)</h3>
        <ul>
            <li><strong>Delta (Œî):</strong> Preissensitivit√§t.</li>
            <li><strong>Gamma (Œì):</strong> Delta-√Ñnderung.</li>
            <li><strong>Theta (Œò):</strong> Zeitwertverfall.</li>
            <li><strong>Vega (ŒΩ):</strong> Volatilit√§tssensitivit√§t.</li>
        </ul>
    </div>
    <div id="content-es" class="container seo-content lang-content">
        <h2>El Modelo Black-Scholes</h2>
        <p>El modelo Black-Scholes (1973) es fundamental en las finanzas modernas.</p>
        <h3>Las Griegas</h3>
        <ul>
            <li><strong>Delta (Œî):</strong> Sensibilidad al precio.</li>
            <li><strong>Gamma (Œì):</strong> Cambio de Delta.</li>
            <li><strong>Theta (Œò):</strong> Decaimiento temporal.</li>
            <li><strong>Vega (ŒΩ):</strong> Sensibilidad a volatilidad.</li>
        </ul>
    </div>

    <footer>
        <p>&copy; 2025 <span data-lang="footer_rights">All Rights Reserved.</span> | <a href="privacy.html" data-lang="nav_privacy">Privacy</a></p>
    </footer>

    <script>
        // ... (A kor√°bbi calculateBS f√ºggv√©nyed ide j√∂n v√°ltozatlanul, csak a v√©g√©n a ki√≠rat√°sn√°l haszn√°lja a lang.js-t, ahogy a legut√≥bbi k√≥dban)
        // Mivel a script hossz√∫, csak a l√©nyeget jelzem: a headben l√©v≈ë lang.js beh√∫z√°s √©s az adsense a legfontosabb.
        // M√°sold be ide a TELJES scriptet az el≈ëz≈ë √ºzenetemb≈ël (calculateBS)!
        
        // --- HELYHI√ÅNY MIATT ITT √öJRA√çROM A L√âNYEGET, HOGY M√ÅSOLHASS ---
        function cnd(x) { var a1 = 0.31938153, a2 = -0.356563782, a3 = 1.781477937, a4 = -1.821255978, a5 = 1.330274429; var p = 0.2316419; var L = Math.abs(x); var k = 1 / (1 + p * L); var w = 1 - 1 / Math.sqrt(2 * Math.PI) * Math.exp(-L * L / 2) * (a1 * k + a2 * k * k + a3 * Math.pow(k, 3) + a4 * Math.pow(k, 4) + a5 * Math.pow(k, 5)); return (x < 0) ? 1 - w : w; }
        function safeCND(x) { if (x > 8) return 1; if (x < -8) return 0; return cnd(x); }
        function pdf(x) { return (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-(x * x) / 2); }

        function calculateBS() {
            let S = parseFloat(document.getElementById('S').value);
            let K = parseFloat(document.getElementById('K').value);
            let T = parseFloat(document.getElementById('T').value);
            let v_percent = parseFloat(document.getElementById('v').value);
            let r_percent = parseFloat(document.getElementById('r').value);

            if (S <= 0 || K <= 0) { alert("Positive values required."); return; }
            if (T <= 0 || v_percent <= 0) { alert("Positive values required."); return; }

            let v = v_percent / 100;
            let r = r_percent / 100;
            let d1 = (Math.log(S / K) + (r + (v * v) / 2) * T) / (v * Math.sqrt(T));
            let d2 = d1 - v * Math.sqrt(T);
            let pdf_d1 = pdf(d1);
            let discountFactor = Math.exp(-r * T);

            let callPrice = S * safeCND(d1) - K * discountFactor * safeCND(d2);
            let putPrice = K * discountFactor * safeCND(-d2) - S * safeCND(-d1);

            let callDelta = safeCND(d1); let putDelta = callDelta - 1;
            let gamma = pdf_d1 / (S * v * Math.sqrt(T));
            let vega = (S * pdf_d1 * Math.sqrt(T)) / 100;
            let term1 = -(S * pdf_d1 * v) / (2 * Math.sqrt(T));
            let thetaCallDaily = (term1 - r * K * discountFactor * safeCND(d2)) / 365;
            let thetaPutDaily = (term1 + r * K * discountFactor * safeCND(-d2)) / 365;

            const lang = localStorage.getItem('selectedLang') || 'en';
            const t = translations[lang] || translations['en'];
            let usdFormatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });

            let warningHtml = '';
            if (T < 0.02) warningHtml = `<div class="warning-box"><span>‚ö†Ô∏è</span><span>${t.warn_short_maturity}</span></div>`;

            let html = warningHtml + `
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px; text-align:center; margin-bottom:20px;">
                    <div style="background:#334155; padding:15px; border-radius:8px; border:1px solid #10b981;">
                        <span style="color:#10b981; font-weight:bold;">${t.res_call}</span><br>
                        <span style="font-size:1.5em; color:#fff;">${usdFormatter.format(callPrice)}</span>
                    </div>
                    <div style="background:#334155; padding:15px; border-radius:8px; border:1px solid #ef4444;">
                        <span style="color:#ef4444; font-weight:bold;">${t.res_put}</span><br>
                        <span style="font-size:1.5em; color:#fff;">${usdFormatter.format(putPrice)}</span>
                    </div>
                </div>
                <h4 style="border-bottom:1px solid #475569; padding-bottom:5px; margin-bottom:10px;">${t.res_greeks}</h4>
                <div class="greeks-grid">
                    <div class="greek-item"><span class="greek-label">${t.res_delta} (Œî)</span><span class="greek-value" style="color:#10b981;">${callDelta.toFixed(4)}</span> <br><span class="greek-value" style="color:#ef4444;">${putDelta.toFixed(4)}</span></div>
                    <div class="greek-item"><span class="greek-label">${t.res_gamma} (Œì)</span><span class="greek-value">${gamma.toFixed(5)}</span> <span class="unit-label">1/$</span></div>
                    <div class="greek-item"><span class="greek-label">${t.res_theta} (Œò)</span><span class="greek-value" style="color:#f59e0b;">${thetaCallDaily.toFixed(4)}</span> <span class="unit-label">$/day</span></div>
                    <div class="greek-item"><span class="greek-label">${t.res_vega} (ŒΩ)</span><span class="greek-value">${vega.toFixed(4)}</span> <span class="unit-label">$</span></div>
                </div>
            `;
            document.getElementById('bs-result').style.display = 'block';
            document.getElementById('bs-result').innerHTML = html;
        }
    </script>
</body>
</html>